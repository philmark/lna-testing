<html>
    <head>
    </head>
    <body>
        <script>
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('sw.js', { scope: './' }).then(reg => {
                    console.log('Service Worker registered with scope:', reg.scope);
                }).catch(err => {
                    console.log('Service Worker registration failed:', err);
                });
            }

            async function getLNAState() {
                try {
                    const permission = await navigator.permissions.query({ name: 'local-network-access' });
                    let lnaPermission = permission?.state || 'unknown';
                    permission.onchange = () => {
                        console.log('LNA state changed to:', permission.state);
                        lnaPermission = permission.state;

                        const lnaStateElement = document.querySelector('.lnaState');
                        lnaStateElement.textContent = `LNA State: ${lnaPermission}`;
                    };
                } catch (error) {
                    console.error('Error querying LNA permission:', error);
                }
            }

            window.onload(() => {
                getLNAState();
            });
        </script>
    </body>
</html>